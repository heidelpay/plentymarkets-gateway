{% block style %}
<style>
    #heidelpayForm iframe {
        border: none;
        height: 16rem;
        width: 100%;
    }
</style>
{% endblock %}

<div id="heidelpayForm" class="container-fluid">
    {% block content %}
    {% endblock %}
</div>

{% block scripts %}
    <script>
        let form = document.getElementById('heidelpay-payment-form');
        let triggerButton = document.getElementById('heidelpaySubmitBtn');
        let cancelButton = document.getElementById('heidelpayCancelBtn');

        if (window.addEventListener) {
            window.addEventListener('message', receiveResponse);
            triggerButton.addEventListener('click', submitIFrame);
            cancelButton.addEventListener('click', cancel);
        } else if (window.attachEvent) {
            window.attachEvent('onmessage', receiveResponse);
            triggerButton.attachEvent('onclick', submitIFrame);
            triggerButton.attachEvent('onclick', cancel);
        }

        function cancel() {
            triggerButton.disabled = true;
            cancelButton.disabled = true;
        }

        function submitForm() {
            let isFormValid = form.reportValidity();
            if (isFormValid) {
                triggerButton.disabled = true;
                cancelButton.disabled = true;
                form.submit();
            }
        }
    </script>
{% endblock %}